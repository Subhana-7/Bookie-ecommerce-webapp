<!DOCTYPE html>
<html lang="en">
    <%-include("../../views/partials/user/header")%>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Address</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .btn-maroon {
            background-color: #800000; 
            color: white;
        }
        .error-message {
            color: red;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2>Edit Address</h2>
        <form action="/edit-address/<%= address._id %>" method="POST" id="addressForm">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= address.name %>" required>
                <small class="error-message" id="nameError"></small>
            </div>
            <div class="form-group">
                <label for="addressType">Address Type</label>
                <input type="text" class="form-control" id="addressType" name="addressType" value="<%= address.addressType %>" required>
            </div>

            <div class="form-group">
                <label for="streetName">Street Name</label>
                <input type="text" class="form-control" id="streetName" name="streetName" value="<%= address.streetName %>" required>
            </div>

            <div class="form-group">
                <label for="landmark">Landmark</label>
                <input type="text" class="form-control" id="landmark" name="landmark" value="<%= address.landmark %>" required>
            </div>

            <div class="form-group">
                <label for="locality">Locality</label>
                <input type="text" class="form-control" id="locality" name="locality" value="<%= address.locality %>" required>
            </div>

            <div class="form-group">
                <label for="city">City</label>
                <input type="text" class="form-control" id="city" name="city" value="<%= address.city %>" required>
            </div>

            <div class="form-group">
                <label for="state">State</label>
                <input type="text" class="form-control" id="state" name="state" value="<%= address.state %>" required>
            </div>

            <div class="form-group">
                <label for="pincode">Pin Code</label>
                <input type="text" class="form-control" id="pincode" name="pin" value="<%= address.pin %>" required pattern="^\d{6}$">
                <small class="error-message" id="pinError"></small>
            </div>

            <div class="form-group">
                <label for="contactNo">Contact Number</label>
                <input type="text" class="form-control" id="contactNo" name="contactNo" value="<%= address.contactNo %>" required pattern="^\d{10}$">
                <small class="error-message" id="contactNoError"></small>
            </div>

            <button type="submit" class="btn btn-maroon">Update Address</button>
            <a href="/profile" class="btn btn-secondary ml-2">Cancel</a>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.getElementById('addressForm').addEventListener('submit', function(event) {
            let isValid = true;

            const name = document.getElementById('name').value;
            const namePattern = /^[A-Za-z\s]+$/; 
            if (!name.match(namePattern)) {
                document.getElementById('nameError').textContent = 'Name should only contain letters and spaces.';
                isValid = false;
            } else {
                document.getElementById('nameError').textContent = '';
            }

            const pin = document.getElementById('pincode').value;
            const pinPattern = /^\d{6}$/;
            if (!pin.match(pinPattern)) {
                document.getElementById('pinError').textContent = 'Pin code must be a 6-digit number.';
                isValid = false;
            } else {
                document.getElementById('pinError').textContent = '';
            }

            const contactNo = document.getElementById('contactNo').value;
            const contactPattern = /^\d{10}$/;
            if (!contactNo.match(contactPattern)) {
                document.getElementById('contactNoError').textContent = 'Contact number must be a 10-digit number.';
                isValid = false;
            } else {
                document.getElementById('contactNoError').textContent = '';
            }

            if (!isValid) {
                event.preventDefault();
            }
        });
    </script>
</body>
</html>
